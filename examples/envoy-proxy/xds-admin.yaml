# Base config for running the nightjar admin server on port 9902,
# linkable through 

name: managed
node:
  cluster: test-cluster
  id: test-id
dynamic_resources:
  cds_config: {ads: {}}
  lds_config: {ads: {}}
  rds_config: {ads: {}}
  ads_config:
    api_type: GRPC
    grpc_services:
      envoy_grpc:
        cluster_name: ads_cluster
static_resources:
  clusters:
  # The nightjar server.
  # It should be accessible through a link in the docker setup, so that
  # "nightjar" host refers to the nightjar container.
  - name: nightjar
    connect_timeout: { seconds: 5 }
    type: STRICT_DNS
    load_assignment:
      cluster_name: nightjar
      endpoints:
        - lb_endpoints:
            - endpoint:
                address:
                  socket_address:
                    address: nightjar
                    port_value: 9902
    lb_policy: ROUND_ROBIN
    http2_protocol_options: {}
admin:
  access_log_path: /dev/stdout
  address:
    socket_address:
      # Listen to all networks, so that nightjar can call into it.
      address: 0.0.0.0
      port_value: 9901
