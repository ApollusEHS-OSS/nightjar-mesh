# Base config for a split xDS management server on 9902, admin port on 9901
# The admin ports are open to listen on all network cards to allow for running
# as a stand-alone docker container within an EC2 container instance in an
# ECS cluster.
dynamic_resources:
  # LDS: envoy.api.v2.Listener
  # RDS: envoy.api.v2.RouteConfiguration
  # VHDS: envoy.api.v2.Vhds
  # CDS: envoy.api.v2.Cluster
  # EDS: envoy.api.v2.ClusterLoadAssignment
  # SDS: envoy.api.v2.Auth.Secret
  # RTDS: envoy.service.discovery.v2.Runtime

name: xds_cluster
node:
  cluster: test-cluster
  id: test-id
dynamic_resources:
  cds_config: {ads: {}}
  lds_config: {ads: {}}
  rds_config: {ads: {}}
  ads_config:
    api_type: GRPC
    grpc_services:
      envoy_grpc:
        cluster_name: ads_cluster
static_resources:
  clusters:
  - name: ads_cluster
    connect_timeout: { seconds: 5 }
    type: STATIC
    load_assignment:
      cluster_name: ads_cluster
      endpoints:
        - lb_endpoints:
            - endpoint:
                address:
                  socket_address:
                    address: 127.0.0.1
                    port_value: 9901
    lb_policy: ROUND_ROBIN
    http2_protocol_options: {}
admin:
  access_log_path: /dev/stdout
  address:
    socket_address:
      # Listen to all networks, so that nightjar can call into it.
      address: 0.0.0.0
      port_value: 9901
